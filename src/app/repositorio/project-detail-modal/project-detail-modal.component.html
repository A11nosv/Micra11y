<ion-header>
  <ion-toolbar>
    <ion-title>{{ selectedProject?.title }}</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="closeModal()" [ariaLabel]="'CLOSE' | translate" class="close-modal-button">
        <ion-icon name="close" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div class="modal-content project-detail" *ngIf="selectedProject">
    <div class="project-detail-header">
      <div id="detail-header-content">
        <span class="project-category">{{ getCategoryLabel(selectedProject.category) | translate }}</span>
        <span class="project-level">({{ getLevelLabel(selectedProject.level) | translate }})</span>
        <h2>{{ selectedProject.title }}</h2>
        <div class="project-author">
          <span>üë§</span>
          <span>{{ selectedProject.author }}</span>
        </div>
        <div class="project-stats-modal" (click)="likeProject(selectedProject.id!)" role="button" [attr.aria-label]="'REPOSITORIO_PAGE.PROJECT_CARD.LIKE_BUTTON' | translate">
          <span>‚ù§Ô∏è</span>
          <span>{{ selectedProject.likes }}</span>
        </div>
      </div>
    </div>
    <div class="project-detail-body">
      <div class="detail-section">
        <h3>{{ 'REPOSITORIO_PAGE.DETAIL_MODAL.DESCRIPTION_SECTION_TITLE' | translate }}</h3>
        <p>{{ selectedProject.description }}</p>
      </div>

      <div class="detail-section">
        <h3>{{ 'REPOSITORIO_PAGE.DETAIL_MODAL.TAGS_SECTION_TITLE' | translate }}</h3>
        <div class="project-tags">
          <span class="tag" *ngFor="let tag of selectedProject.tags">{{ tag | translate }}</span>
        </div>
      </div>

      <div class="detail-section">
        <h3>{{ 'REPOSITORIO_PAGE.UPLOAD_MODAL.MATERIALS_LABEL' | translate }}</h3>
        <p>{{ selectedProject.materials?.join(', ') }}</p>
      </div>

      <div class="detail-section" *ngIf="selectedProject.instructions">
        <h3>{{ 'REPOSITORIO_PAGE.UPLOAD_MODAL.INSTRUCTIONS_LABEL' | translate }}</h3>
        <p style="white-space: pre-wrap;">{{ selectedProject.instructions }}</p>
      </div>

      <div class="detail-section">
        <h3>{{ 'REPOSITORIO_PAGE.DETAIL_MODAL.CODE_SECTION_TITLE' | translate }}</h3>
        <div class="code-block">
          <button class="copy-btn" (click)="copyCode(selectedProject.code)" [class.copied]="copied">{{ copied ? ('REPOSITORIO_PAGE.DETAIL_MODAL.COPIED_CODE_BUTTON' | translate) : ('REPOSITORIO_PAGE.DETAIL_MODAL.COPY_CODE_BUTTON' | translate) }}</button>
          <pre [highlight]="selectedProject.code" language="python"></pre>
        </div>
      </div>

      <div class="detail-section button-group">
        <ion-button class="btn-submit" (click)="downloadProject(selectedProject.id!)">
          ‚¨áÔ∏è {{ 'REPOSITORIO_PAGE.DETAIL_MODAL.DOWNLOAD_FULL_PROJECT_BUTTON' | translate }}
        </ion-button>
        <ion-button *ngIf="selectedProject.instructions" class="btn-submit instructions-button" (click)="downloadInstructions(selectedProject.id!)">
          üìÑ {{ 'REPOSITORIO_PAGE.PROJECT_CARD.DOWNLOAD_INSTRUCTIONS_BUTTON' | translate }}
        </ion-button>
      </div>
    </div>
  </div>
</ion-content>
